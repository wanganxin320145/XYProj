webpackJsonp([4],{115:function(t,e,i){"use strict";t.exports=Module._createSubclass("chatManagement"),i(141);var a=i(143),o=Date.now(),n=U.NewGuid(),l=[1,2,3,4,5,6,7],r=Math.floor(Math.random()*l.length),d=l[r];t.exports.prototype.init=function(){var t=function(){var t={el:null,data:{}};return function(e,i){return e=$.extend({},t,e)}}(),e=function(t){return{$box:t,$chatHead:t.find(".chatHead"),$chatContent:t.find(".chatContent"),$chatView:t.find(".chatContent").find(".viewArea").find("ul"),$chatSend:t.find(".chatContent").find(".sendArea")}},i=function(t,e,i){i.uiReady(function(){function t(t){return t=t.replace(/\n/g,"<br/>").replace(/\[em_([0-9]*)\]/g,'<img src="arclist/$1.gif" border="0" />')}i.on("spaAside_resize."+i.name,function(t){i.selectors.$box.is(":visible")&&e.$layout.layout("resize")});var a=e.$chatHead.find("ul>li").eq(0),l=e.$chatHead.find("ul>li").eq(1);$('<img src="./images/'+d+'.jpg">').appendTo(a),$("<span>当前聊友："+o+"</span><span>欢迎来到奇葩聊天室！</span>").appendTo(l);var r=new WebSocket("ws://localhost:3660/api/MessageServer?sid="+n);r.onopen=function(){var t={SenderID:n,ReceiverID:"",MessageType:"text",PicIndex:d,FromClient:o,Content:"大家好！我是"+o};r.send(JSON.stringify(t))},r.onmessage=function(t){var i=JSON.parse(t.data);e.$chatView.append(U.format("<li class='lleft'><div><img src='./images/{0}.jpg'></div><div><span>{1}</span><span>{2}</span></div></li>",i.PicIndex,i.FromClient,i.Content))},r.onclosed=function(){var t={SenderID:n,ReceiverID:"",MessageType:"text",PicIndex:d,FromClient:o,Content:"byebye！我下线了"+o};r.send(JSON.stringify(t))};var h=($('<span class="emotion"></span>').appendTo(e.$chatSend),$('<input id="chat_qqInput">').appendTo(e.$chatSend));h.textbox({multiline:!0,width:"100%",height:200});var c=$("<div>").appendTo(e.$chatSend),s=$("<a>").appendTo(c),p=$("<a>").appendTo(c);s.linkbutton({text:"发送",onClick:function(){var i=h.textbox("getValue");if(i=t(i),e.$chatView.append(U.format("<li class='lright'><div><span>{0}</span><span>{1}</span></div><div><img src='./images/{2}.jpg'></div></li>",o,i,d)),r.readyState===WebSocket.OPEN){var a={SenderID:o,ReceiverID:"",MessageType:"text",Content:i,FromClient:o,PicIndex:d};r.send(JSON.stringify(a))}h.textbox("clear")}}),p.linkbutton({text:"清理",onClick:function(){$(e.$chatView).find("li:gt(0)").remove()}});var m=$(h[0].nextSibling).find("textarea");$(".emotion").qqFace({id:"facebox",assign:m[0].id,path:"arclist/",showId:"chat_qqInput"})})};return function(o){return this._inited?this:(Module._beforeInit.call(this,o,t,a,e,i),Module._afterInit.call(this,o),this)}}()},141:function(t,e,i){var a=i(142);"string"==typeof a&&(a=[[t.i,a,""]]);var o={attrs:{class:""}};o.transform=void 0;i(2)(a,o);a.locals&&(t.exports=a.locals)},142:function(t,e,i){e=t.exports=i(1)(!1),e.push([t.i,'@charset "UTF-8";.m-chatRoom{width:100%;height:100%;-webkit-box-shadow:0 0 10px silver;box-shadow:0 0 10px silver;background-color:#ddd}.m-chatRoom>.chatHead{width:100%;height:100px;background-color:#000}.m-chatRoom>.chatHead>ul{list-style-type:none;min-width:400px}.m-chatRoom>.chatHead>ul>li{font-size:16px;color:#fff;font-weight:700;font-family:微软雅黑;white-space:nowrap;display:inline-block;overflow:hidden;position:relative;vertical-align:middle}.m-chatRoom>.chatHead>ul>li>img{position:absolute;max-width:100px;max-height:100px;left:0;top:0}.m-chatRoom>.chatHead>ul>li>span{display:block}.m-chatRoom>.chatHead>ul>li:first-child{border-radius:50%;background-color:red;width:70px;height:70px;text-align:center;vertical-align:middle;line-height:70px;font-size:20px;margin:15px 10px}.m-chatRoom>.chatContent{width:100%;height:calc(100% - 100px);overflow:auto}.m-chatRoom>.chatContent>.viewArea{width:80%;height:calc(100% - 340px);min-height:200px;margin:10px auto;-webkit-box-shadow:0 0 10px #fff;box-shadow:0 0 10px #fff;background-color:#f7f7f7;overflow:auto;padding:10px}.m-chatRoom>.chatContent>.viewArea>ul{list-style-type:none}.m-chatRoom>.chatContent>.viewArea>ul>li{margin-top:3px;white-space:nowrap}.m-chatRoom>.chatContent>.viewArea>ul>li>div{display:inline-block}.m-chatRoom>.chatContent>.viewArea>ul>li.lleft>div:first-child{width:40px;height:40px;vertical-align:middle}.m-chatRoom>.chatContent>.viewArea>ul>li.lleft>div:first-child > img{max-width:40px;max-height:40px}.m-chatRoom>.chatContent>.viewArea>ul>li.lleft>div:nth-child(2){width:calc(100%-60px);height:auto;padding-left:10px;vertical-align:middle}.m-chatRoom>.chatContent>.viewArea>ul>li.lleft>div:nth-child(2)>span{display:block}.m-chatRoom>.chatContent>.viewArea>ul>li.lleft>div:nth-child(2)>span:nth-child(2){border:1px solid silver;height:20px;line-height:20px;border-radius:5px;padding:5px;background-color:#fff;-webkit-box-shadow:0 0 5px silver;box-shadow:0 0 5px silver;position:relative}.m-chatRoom>.chatContent>.viewArea>ul>li.lleft>div:nth-child(2)>span:nth-child(2):before{content:"";border:6px solid transparent;position:absolute;left:-12px;top:5px;border-right-color:silver}.m-chatRoom>.chatContent>.viewArea>ul>li.lleft>div:nth-child(2)>span:nth-child(2) img{vertical-align:middle}.m-chatRoom>.chatContent>.viewArea>ul>li.lright{text-align:right}.m-chatRoom>.chatContent>.viewArea>ul>li.lright>div:nth-child(2){width:40px;height:40px;vertical-align:middle}.m-chatRoom>.chatContent>.viewArea>ul>li.lright>div:nth-child(2)>img{max-width:40px;max-height:40px}.m-chatRoom>.chatContent>.viewArea>ul>li.lright>div:first-child{width:calc(100%-60px);height:auto;padding-left:10px;vertical-align:middle}.m-chatRoom>.chatContent>.viewArea>ul>li.lright>div:first-child > span{display:block;text-align:right;margin-right:10px}.m-chatRoom>.chatContent>.viewArea>ul>li.lright>div:first-child > span:nth-child(2){border:1px solid #33ff5c;height:20px;line-height:20px;border-radius:5px;padding:5px;background-color:#fff;position:relative;background-color:#5f7}.m-chatRoom>.chatContent>.viewArea>ul>li.lright>div:first-child > span:nth-child(2):after{content:"";border:6px solid transparent;position:absolute;right:-12px;top:5px;border-left-color:#5f7}.m-chatRoom>.chatContent>.viewArea>ul>li.lright>div:first-child > span:nth-child(2) img{vertical-align:middle}.m-chatRoom>.chatContent>.sendArea{width:80%;height:280px;margin:0 auto;-webkit-box-shadow:0 0 10px #fff;box-shadow:0 0 10px #fff;background-color:#fff;padding:5px 10px}.m-chatRoom>.chatContent>.sendArea>span.emotion{display:block;width:20px;height:20px;border:1px solid silver;border-radius:50%;cursor:pointer;margin:3px;position:relative}.m-chatRoom>.chatContent>.sendArea>span.emotion:hover{-webkit-box-shadow:0 0 10px silver;box-shadow:0 0 10px silver}.m-chatRoom>.chatContent>.sendArea>span.emotion:before{content:"- -";position:absolute;left:5px}.m-chatRoom>.chatContent>.sendArea>span.emotion:after{content:"-";position:absolute;top:5px;left:9px}.m-chatRoom>.chatContent>.sendArea>.qqFace{margin-top:4px;background:#fff;padding:2px;border:1px solid #dfe6f6}.m-chatRoom>.chatContent>.sendArea>.qqFace>table td{padding:0}.m-chatRoom>.chatContent>.sendArea>.qqFace>table td>img{cursor:pointer;border:1px solid #fff}.m-chatRoom>.chatContent>.sendArea>.qqFace>table td>img:hover{border:1px solid #06c}.m-chatRoom>.chatContent>.sendArea>.textbox{margin-bottom:10px;-webkit-box-shadow:0 0 10px silver;box-shadow:0 0 10px silver}.m-chatRoom>.chatContent>.sendArea>div{padding-left:10px}.m-chatRoom>.chatContent>.sendArea>div>a{width:50px;margin-right:10px;-webkit-box-shadow:0 0 5px silver;box-shadow:0 0 5px silver}',""])},143:function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="m-chatRoom">\r\n\t<div class="chatHead">\r\n\t\t<ul>\r\n\t\t\t<li></li>\r\n\t\t\t<li></li>\r\n\t\t</ul>\r\n\t</div>\r\n\t<div class="chatContent">\r\n\t\t<div class="viewArea">\r\n\t\t\t<ul></ul>\r\n\t\t</div>\r\n\t\t<div class="sendArea">\r\n\t\t</div>\r\n\t</div>\r\n</div>';return __p}}});